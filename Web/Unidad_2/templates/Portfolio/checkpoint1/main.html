<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cryptocurrency Spatio-Temporal Dashboard</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>â‚¿</text></svg>">
    
    <!-- CSS Styles -->
    <link rel="stylesheet" href="/unidad2/portafolio/css/checkpoint1/main.css">
    
    <!-- D3.js -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://d3js.org/topojson.v3.min.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- Tabler Icons -->
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css" as="style">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <button class="back-to-portfolio-btn" onclick="goToPortfolio()">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Back to Portfolio</span>
            </button>

            <button class="theme-toggle-btn" data-theme-toggle aria-label="Toggle theme">
                <span class="theme-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" fill="currentColor"/>
                    </svg>
                </span>
                <span class="theme-text">Light Mode</span>
            </button>

            <div class="header-content">
                <div class="checkpoint-badge">
                    <span class="badge-number">
                        <i class="ti ti-currency-bitcoin"></i>
                    </span>
                    <span class="badge-text">Crypto Dashboard</span>
                </div>
                <h1>Cryptocurrency Spatio-Temporal Analysis</h1>
                <p class="subtitle">Interactive visualization of global cryptocurrency market dynamics</p>
                
                <div class="checkpoint-meta">
                    <div class="meta-item">
                        <i class="ti ti-world"></i>
                        <span>Global Coverage</span>
                    </div>
                    <div class="meta-item">
                        <i class="ti ti-chart-line"></i>
                        <span>Real-time Data</span>
                    </div>
                    <div class="meta-item">
                        <i class="ti ti-database"></i>
                        <span id="data-count">0 Cryptocurrencies</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content -->
        <main class="main-content dashboard-main">
            <!-- Control Panel -->
            <div class="control-panel">
                <div class="control-group">
                    <label for="crypto-select">Select Cryptocurrency:</label>
                    <select id="crypto-select">
                        <option value="all">All Cryptocurrencies</option>
                        <option value="bitcoin">Bitcoin (BTC)</option>
                        <option value="ethereum">Ethereum (ETH)</option>
                        <option value="ripple">Ripple (XRP)</option>
                        <option value="litecoin">Litecoin (LTC)</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="time-range">Time Range:</label>
                    <select id="time-range">
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                        <option value="90d">Last 90 Days</option>
                        <option value="1y">Last Year</option>
                    </select>
                </div>

                <button class="refresh-btn" onclick="refreshData()">
                    <i class="ti ti-refresh"></i>
                    Refresh Data
                </button>
            </div>

            <!-- Sections container -->
            <div class="dashboard-grid">
                <!-- KPI Cards -->
                <section class="dashboard-section full-width">
                    <h2 class="section-title">Key Performance Indicators</h2>
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="ti ti-coin"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Total Market Cap</p>
                                <p class="kpi-value" id="market-cap">$2.15T</p>
                                <p class="kpi-change positive">
                                    <i class="ti ti-trending-up"></i>
                                    +12.5%
                                </p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="ti ti-chart-candle"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">24h Trading Volume</p>
                                <p class="kpi-value" id="volume-24h">$98.2B</p>
                                <p class="kpi-change positive">
                                    <i class="ti ti-trending-up"></i>
                                    +8.3%
                                </p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="ti ti-world"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Dominant Currency</p>
                                <p class="kpi-value" id="dominant-currency">Bitcoin</p>
                                <p class="kpi-change">
                                    <i class="ti ti-info-circle"></i>
                                    42% Market Share
                                </p>
                            </div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-icon">
                                <i class="ti ti-users"></i>
                            </div>
                            <div class="kpi-content">
                                <p class="kpi-label">Active Wallets</p>
                                <p class="kpi-value" id="active-wallets">42.3M</p>
                                <p class="kpi-change positive">
                                    <i class="ti ti-trending-up"></i>
                                    +2.1%
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- World Map -->
                <section class="dashboard-section full-width">
                    <h2 class="section-title">
                        <i class="ti ti-world"></i>
                        Global Cryptocurrency Distribution
                    </h2>
                    <div id="world-map-container" class="map-container">
                        <svg id="world-map"></svg>
                    </div>
                    <div class="map-legend">
                        <div class="legend-item">
                            <span class="legend-color" style="background: #fee5d9;"></span>
                            <span>Low Activity</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #fcae91;"></span>
                            <span>Medium Activity</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #fb6a4a;"></span>
                            <span>High Activity</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background: #cb181d;"></span>
                            <span>Very High Activity</span>
                        </div>
                    </div>
                </section>

                <!-- Price Trend Chart -->
                <section class="dashboard-section half-width">
                    <h2 class="section-title">
                        <i class="ti ti-chart-line"></i>
                        Price Trends (30 Days)
                    </h2>
                    <div class="chart-container">
                        <canvas id="price-chart"></canvas>
                    </div>
                </section>

                <!-- Market Share Pie Chart -->
                <section class="dashboard-section half-width">
                    <h2 class="section-title">
                        <i class="ti ti-chart-pie"></i>
                        Market Share Distribution
                    </h2>
                    <div class="chart-container">
                        <canvas id="market-share-chart"></canvas>
                    </div>
                </section>

                <!-- Volume Analysis -->
                <section class="dashboard-section half-width">
                    <h2 class="section-title">
                        <i class="ti ti-chart-histogram"></i>
                        Trading Volume by Region
                    </h2>
                    <div class="chart-container">
                        <canvas id="volume-chart"></canvas>
                    </div>
                </section>

                <!-- Volatility Heatmap -->
                <section class="dashboard-section half-width">
                    <h2 class="section-title">
                        <i class="ti ti-flame"></i>
                        Market Volatility
                    </h2>
                    <div id="volatility-heatmap" class="heatmap-container"></div>
                </section>

                <!-- Top Cryptocurrencies Table -->
                <section class="dashboard-section full-width">
                    <h2 class="section-title">
                        <i class="ti ti-table"></i>
                        Top 10 Cryptocurrencies by Market Cap
                    </h2>
                    <div class="table-responsive">
                        <table id="crypto-table" class="crypto-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Name</th>
                                    <th>Symbol</th>
                                    <th>Price</th>
                                    <th>Market Cap</th>
                                    <th>24h Change</th>
                                    <th>Volume</th>
                                </tr>
                            </thead>
                            <tbody id="crypto-table-body">
                                <!-- Data populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>
                Cryptocurrency Spatio-Temporal Dashboard - 
                <span id="current-year"></span> - 
                Data Updated: <span id="last-update">Just now</span>
            </p>
        </footer>
    </div>

    <!-- JavaScript Files -->
    <script src="/unidad2/portafolio/js/checkpoint1/main.js"></script>
</body>
</html>